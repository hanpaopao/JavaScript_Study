<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="UTF-8">
    <title>joke</title>
    <link rel="stylesheet" href="./public/css/07_joke.css" >
  </head>
  <body>
    <div>
      <label for="customname" id="lbl-customname">请输入自定义的名字：</label>
      <input id="customname" type="text" placeholder="李雷" />
    </div>
    <div>
      <label for="cn" id="lbl-cn">中国</label>
      <input id="cn" type="radio" name="country" value="cn" checked />
      <label for="us" id="lbl-us">美国</label>
      <input id="us" type="radio" name="country" value="us" />
      <label for="uk" id="lbl-uk">英国</label>
      <input id="uk" type="radio" name="country" value="uk" />
    </div>
    <div>
      <button class="random">随机生成笑话</button>
    </div>
    <p class="story"></p>
    <script src="./public/js/07_joke_language.js"></script>
    <script>
      const customname = document.getElementById('customname');
      const random = document.querySelector('.random');
      const story = document.querySelector('.story');
      function randomValueFromArray(array) {
        let random = Math.floor(Math.random()*array.length);
        return array[random];
      }
      let storyText = '这:insertX:是:insertY:一:insertZ:个长数组李雷';
      let insertX = ['x1', 'x2', 'x3'];
      let insertY = ['Y1', 'Y2', 'Y3'];
      let insertZ = ['Z1', 'Z2', 'Z3'];

      random.onclick = function() {
        result();
      }

      function result() {
        let newStory, xItem, yItem, zItem, name;
        if (document.getElementById('cn').checked) {
          newStory = storyText;
          xItem = randomValueFromArray(insertX);
          yItem = randomValueFromArray(insertY);
          zItem = randomValueFromArray(insertZ);
          newStory = newStory.replace(':insertX:', xItem);
          newStory = newStory.replace(':insertY:', yItem);
          newStory = newStory.replace(':insertZ:', zItem);

          if (customname.value !== '') {
            name = customname.value;
            newStory = newStory.replace('李雷', name);
          }

        }

        story.textContent = newStory;
        story.style.visibility = 'visible';
        

      }


    </script>
  </body>
</html>